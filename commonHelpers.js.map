{"version":3,"file":"commonHelpers.js","sources":["../src/img/alert.svg","../src/js/gallery.js"],"sourcesContent":["export default \"__VITE_ASSET__0a4fe6ce__\"","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport alertImg from \"/img/alert.svg\";\nimport axios from \"axios\";\n\nconst form = document.querySelector('.form');\nconst getMoreBtn = document.querySelector(\".get-more-btn\");\n\nconst photoLoader = {\n    url: \"https://pixabay.com/api/\",\n    searchParams: {\n        key: \"40878457-91c7c8077e8a58c5727309d44\",\n        q: \"\",\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: 40,\n        page: 1,\n    },\n    searchPhotosBtn: document.querySelector(\".search-btn\"),\n    searchTerm: document.querySelector('.searchTerm'),\n    loader: document.querySelector('.loader'),\n    gallery: document.querySelector(\".gallery\"),\n\n    simpleGallery: new SimpleLightbox('.gallery a', {\n        overlayOpacity: 0.8,\n        captionsData: 'alt',\n        captionDelay: 250,\n    }),\n\n    startSearch(event) {\n        event.preventDefault();\n        if (this.searchTerm.value.trim().length < 3) {\n            this.showAlert(\"Please, enter search term!\");\n            return;\n        }\n        this.gallery.innerHTML = '';\n        this.searchParams.q = this.searchTerm.value.trim();\n        this.searchParams.page = 1;\n        this.fetchPhotos();\n    },\n\n    continueSearch() {\n        this.searchParams.page += 1;\n        this.fetchPhotos();\n    },\n\n    renderPhotos(photos) {\n        if (photos.total === 0) {\n            this.showAlert('Sorry, there are no images matching your search query. Please try again!');\n            this.showLoader(false);\n            return;\n        }\n        const markup = photos.hits\n            .map((photo) => {\n                return `<a class=\"gallery-link\" href=\"${photo.largeImageURL}\"><span class=\"gallery-item\"><img class=\"gallery-image\" src=\"${photo.webformatURL}\" alt=\"${photo.tags}\" title=\"${photo.tags}\" /></span>\n                <span class=\"img-stat\">\n                <span class=\"img-stat-item\"><span class=\"img-stat-title\">Likes</span><span class=\"img-stat-val\">${photo.likes}</span></span>\n                <span class=\"img-stat-item\"><span class=\"img-stat-title\">Views</span><span class=\"img-stat-val\">${photo.views}</span></span>\n                <span class=\"img-stat-item\"><span class=\"img-stat-title\">Comments</span><span class=\"img-stat-val\">${photo.comments}</span></span>\n                <span class=\"img-stat-item\"><span class=\"img-stat-title\">Downloads</span><span class=\"img-stat-val\">${photo.downloads}</span></span>\n                </span>\n                </a>`;\n            })\n            .join(\"\");\n        this.showLoader(false);\n        this.gallery.insertAdjacentHTML(\"beforeend\", markup);\n\n        if (this.searchParams.page === 1 && photos.totalHits > 1) {\n            getMoreBtn.style.display = 'block';\n        }        \n        if (Math.ceil(photos.totalHits / this.searchParams.per_page) === this.searchParams.page) {\n            getMoreBtn.style.display = 'none';\n            this.showAlert(\"We're sorry, but you've reached the end of search results.\");\n        }\n        this.simpleGallery.refresh();\n        if (this.searchParams.page > 1) {\n            const rect = document.querySelector(\".gallery-link\").getBoundingClientRect();\n            window.scrollBy({ top: rect.height * 2, left: 0, behavior: \"smooth\" });\n        }\n    },\n\n    showLoader(state = true) {\n        this.loader.style.display = !state ? 'none' : 'inline-block';\n        this.searchPhotosBtn.disabled = state;\n    },\n\n    showAlert(msg) {\n        iziToast.show({\n            position: 'center',\n            iconUrl: alertImg,\n            messageColor: '#FAFAFB',\n            messageSize: '16px',\n            backgroundColor: '#EF4040',\n            close: false,\n            closeOnClick: true,\n            message: msg\n        })\n    },\n\n    async fetchPhotos() {\n        this.showLoader(true);\n        try {\n            const response = await axios.get(this.url, { params: this.searchParams });\n            this.renderPhotos(await response.data);\n        } catch (error) {\n            this.showAlert(error.message);\n            this.showLoader(false);\n        }\n    }\n\n}\n\nform.addEventListener(\"submit\", (event) => photoLoader.startSearch(event));\n\ngetMoreBtn.addEventListener(\"click\", () => photoLoader.continueSearch());\n\n\n/*\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport alertImg from \"/img/alert.svg\";\nimport axios from \"axios\";\n\nconst url = \"https://pixabay.com/api/\";\nconst searchParams = {\n    key: \"40878457-91c7c8077e8a58c5727309d44\",\n    q: \"\",\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: 40,\n    page: 1,\n};\n\nconst form = document.querySelector('.form');\nconst searchTerm = document.querySelector('.searchTerm');\nconst searchPhotosBtn = document.querySelector(\".search-btn\");\nconst getMoreBtn = document.querySelector(\".get-more-btn\");\nconst loader = document.querySelector('.loader');\nconst gallery = document.querySelector(\".gallery\");\n\nconst simpleGallery = new SimpleLightbox('.gallery a', {\n    overlayOpacity: 0.8,\n    captionsData: 'alt',\n    captionDelay: 250,\n});\n\nform.addEventListener(\"submit\", (event) => {\n    event.preventDefault();\n    if (searchTerm.value.trim().length < 3) {\n        showAlert(\"Please, enter search term!\");\n        return;\n    }\n    gallery.innerHTML = '';\n    showLoader(true);\n    searchParams.q = searchTerm.value.trim();\n    searchParams.page = 1;\n    fetchPhotos();\n});\n\ngetMoreBtn.addEventListener(\"click\", () => {\n    searchParams.page += 1;\n    showLoader(true);\n    fetchPhotos();\n})\n\nasync function fetchPhotos() {\n  try {\n    const response = await axios.get(url, { params: searchParams });\n      renderPhotos(await response.data);\n  } catch (error) {\n      showAlert(error.message);\n      showLoader(false);\n  }\n}\n\nfunction renderPhotos(photos) {\n    if (photos.total === 0) {\n        showAlert('Sorry, there are no images matching your search query. Please try again!');\n        showLoader(false);\n        return;\n    }\n    const markup = photos.hits\n        .map((photo) => {\n            return `<a class=\"gallery-link\" href=\"${photo.largeImageURL}\"><span class=\"gallery-item\"><img class=\"gallery-image\" src=\"${photo.webformatURL}\" alt=\"${photo.tags}\" title=\"${photo.tags}\" /></span>\n            <span class=\"img-stat\">\n            <span class=\"img-stat-item\"><span class=\"img-stat-title\">Likes</span><span class=\"img-stat-val\">${photo.likes}</span></span>\n            <span class=\"img-stat-item\"><span class=\"img-stat-title\">Views</span><span class=\"img-stat-val\">${photo.views}</span></span>\n            <span class=\"img-stat-item\"><span class=\"img-stat-title\">Comments</span><span class=\"img-stat-val\">${photo.comments}</span></span>\n            <span class=\"img-stat-item\"><span class=\"img-stat-title\">Downloads</span><span class=\"img-stat-val\">${photo.downloads}</span></span>\n            </span>\n            </a>`;\n        })\n        .join(\"\");\n    showLoader(false);\n    gallery.insertAdjacentHTML(\"beforeend\", markup);\n\n    if (searchParams.page === 1 && photos.totalHits > 1) {\n        getMoreBtn.style.display = 'block';\n    }        \n    if (Math.ceil(photos.totalHits / searchParams.per_page) === searchParams.page) {\n        getMoreBtn.style.display = 'none';\n        showAlert(\"We're sorry, but you've reached the end of search results.\");\n    }\n    simpleGallery.refresh();\n    if (searchParams.page > 1) {\n        const rect = document.querySelector(\".gallery-link\").getBoundingClientRect();\n        window.scrollBy({ top: rect.height * 2, left: 0, behavior: \"smooth\" });\n    }\n}\n\nfunction showLoader(state = true) {\n    loader.style.display = !state ? 'none' : 'inline-block';\n    searchPhotosBtn.disabled = state;\n}\n\nfunction showAlert(msg) {\n    iziToast.show({\n        position: 'center',\n        iconUrl: alertImg,\n        messageColor: '#FAFAFB',\n        messageSize: '16px',\n        backgroundColor: '#EF4040',\n        close: false,\n        closeOnClick: true,\n        message: msg\n    });\n}\n*/"],"names":["alertImg","form","getMoreBtn","photoLoader","SimpleLightbox","event","photos","markup","photo","rect","state","msg","iziToast","response","axios","error"],"mappings":"owBAAA,MAAeA,EAAA,2CCOTC,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAa,SAAS,cAAc,eAAe,EAEnDC,EAAc,CAChB,IAAK,2BACL,aAAc,CACV,IAAK,qCACL,EAAG,GACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAM,CACT,EACD,gBAAiB,SAAS,cAAc,aAAa,EACrD,WAAY,SAAS,cAAc,aAAa,EAChD,OAAQ,SAAS,cAAc,SAAS,EACxC,QAAS,SAAS,cAAc,UAAU,EAE1C,cAAe,IAAIC,EAAe,aAAc,CAC5C,eAAgB,GAChB,aAAc,MACd,aAAc,GACtB,CAAK,EAED,YAAYC,EAAO,CAEf,GADAA,EAAM,eAAc,EAChB,KAAK,WAAW,MAAM,KAAM,EAAC,OAAS,EAAG,CACzC,KAAK,UAAU,4BAA4B,EAC3C,MACH,CACD,KAAK,QAAQ,UAAY,GACzB,KAAK,aAAa,EAAI,KAAK,WAAW,MAAM,OAC5C,KAAK,aAAa,KAAO,EACzB,KAAK,YAAW,CACnB,EAED,gBAAiB,CACb,KAAK,aAAa,MAAQ,EAC1B,KAAK,YAAW,CACnB,EAED,aAAaC,EAAQ,CACjB,GAAIA,EAAO,QAAU,EAAG,CACpB,KAAK,UAAU,0EAA0E,EACzF,KAAK,WAAW,EAAK,EACrB,MACH,CACD,MAAMC,EAASD,EAAO,KACjB,IAAKE,GACK,iCAAiCA,EAAM,6EAA6EA,EAAM,sBAAsBA,EAAM,gBAAgBA,EAAM;AAAA;AAAA,kHAEjFA,EAAM;AAAA,kHACNA,EAAM;AAAA,qHACHA,EAAM;AAAA,sHACLA,EAAM;AAAA;AAAA,qBAG/G,EACA,KAAK,EAAE,EAYZ,GAXA,KAAK,WAAW,EAAK,EACrB,KAAK,QAAQ,mBAAmB,YAAaD,CAAM,EAE/C,KAAK,aAAa,OAAS,GAAKD,EAAO,UAAY,IACnDJ,EAAW,MAAM,QAAU,SAE3B,KAAK,KAAKI,EAAO,UAAY,KAAK,aAAa,QAAQ,IAAM,KAAK,aAAa,OAC/EJ,EAAW,MAAM,QAAU,OAC3B,KAAK,UAAU,4DAA4D,GAE/E,KAAK,cAAc,UACf,KAAK,aAAa,KAAO,EAAG,CAC5B,MAAMO,EAAO,SAAS,cAAc,eAAe,EAAE,sBAAqB,EAC1E,OAAO,SAAS,CAAE,IAAKA,EAAK,OAAS,EAAG,KAAM,EAAG,SAAU,QAAU,CAAA,CACxE,CACJ,EAED,WAAWC,EAAQ,GAAM,CACrB,KAAK,OAAO,MAAM,QAAWA,EAAiB,eAAT,OACrC,KAAK,gBAAgB,SAAWA,CACnC,EAED,UAAUC,EAAK,CACXC,EAAS,KAAK,CACV,SAAU,SACV,QAASZ,EACT,aAAc,UACd,YAAa,OACb,gBAAiB,UACjB,MAAO,GACP,aAAc,GACd,QAASW,CACrB,CAAS,CACJ,EAED,MAAM,aAAc,CAChB,KAAK,WAAW,EAAI,EACpB,GAAI,CACA,MAAME,EAAW,MAAMC,EAAM,IAAI,KAAK,IAAK,CAAE,OAAQ,KAAK,YAAY,CAAE,EACxE,KAAK,aAAa,MAAMD,EAAS,IAAI,CACxC,OAAQE,EAAP,CACE,KAAK,UAAUA,EAAM,OAAO,EAC5B,KAAK,WAAW,EAAK,CACxB,CACJ,CAEL,EAEAd,EAAK,iBAAiB,SAAWI,GAAUF,EAAY,YAAYE,CAAK,CAAC,EAEzEH,EAAW,iBAAiB,QAAS,IAAMC,EAAY,eAAgB,CAAA"}