{"version":3,"file":"commonHelpers.js","sources":["../src/img/alert.svg","../src/js/gallery.js"],"sourcesContent":["export default \"__VITE_ASSET__0a4fe6ce__\"","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport alertImg from \"/img/alert.svg\";\nimport axios from \"axios\";\n\nconst url = \"https://pixabay.com/api/\";\nconst searchParams = {\n    key: \"40878457-91c7c8077e8a58c5727309d44\",\n    q: \"\",\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: 40,\n    page: 1,\n};\n\nconst form = document.querySelector('.form');\nconst searchTerm = document.querySelector('.searchTerm');\nconst searchPhotosBtn = document.querySelector(\".search-btn\");\nconst getMoreBtn = document.querySelector(\".get-more-btn\");\nconst loader = document.querySelector('.loader');\nconst gallery = document.querySelector(\".gallery\");\n\nconst simpleGallery = new SimpleLightbox('.gallery a', {\n    overlayOpacity: 0.8,\n    captionsData: 'alt',\n    captionDelay: 250,\n});\n\nform.addEventListener(\"submit\", (event) => {\n    event.preventDefault();\n    if (searchTerm.value.trim().length < 3) {\n        showAlert(\"Please, enter search term!\");\n        return;\n    }\n    gallery.innerHTML = '';\n    showLoader(true);\n    searchParams.q = searchTerm.value.trim();\n    searchParams.page = 1;\n    fetchPhotos();\n});\n\ngetMoreBtn.addEventListener(\"click\", () => {\n    searchParams.page += 1;\n    showLoader(true);\n    fetchPhotos();\n})\n\nasync function fetchPhotos() {\n  try {\n    const response = await axios.get(url, { params: searchParams });\n      renderPhotos(await response.data);\n  } catch (error) {\n      showAlert(error.message);\n      showLoader(false);\n  }\n}\n\nfunction renderPhotos(photos) {\n    if (photos.total === 0) {\n        showAlert('Sorry, there are no images matching your search query. Please try again!');\n        showLoader(false);\n        return;\n    }\n    const markup = photos.hits\n        .map((photo) => {\n            return `<a class=\"gallery-link\" href=\"${photo.largeImageURL}\"><span class=\"gallery-item\"><img class=\"gallery-image\" src=\"${photo.webformatURL}\" alt=\"${photo.tags}\" title=\"${photo.tags}\" /></span>\n            <span class=\"img-stat\">\n            <span class=\"img-stat-item\"><span class=\"img-stat-title\">Likes</span><span class=\"img-stat-val\">${photo.likes}</span></span>\n            <span class=\"img-stat-item\"><span class=\"img-stat-title\">Views</span><span class=\"img-stat-val\">${photo.views}</span></span>\n            <span class=\"img-stat-item\"><span class=\"img-stat-title\">Comments</span><span class=\"img-stat-val\">${photo.comments}</span></span>\n            <span class=\"img-stat-item\"><span class=\"img-stat-title\">Downloads</span><span class=\"img-stat-val\">${photo.downloads}</span></span>\n            </span>\n            </a>`;\n        })\n        .join(\"\");\n    showLoader(false);\n    gallery.insertAdjacentHTML(\"beforeend\", markup);\n\n    if (searchParams.page === 1 && photos.totalHits > 1) {\n        getMoreBtn.style.display = 'block';\n    }        \n    if (Math.ceil(photos.totalHits / searchParams.per_page) === searchParams.page) {\n        getMoreBtn.style.display = 'none';\n        showAlert(\"We're sorry, but you've reached the end of search results.\");\n    }\n    simpleGallery.refresh();\n    if (searchParams.page > 1) {\n        const rect = document.querySelector(\".gallery-link\").getBoundingClientRect();\n        window.scrollBy({ top: rect.height * 2, left: 0, behavior: \"smooth\" });\n    }\n}\n\nfunction showLoader(state = true) {\n    loader.style.display = !state ? 'none' : 'inline-block';\n    searchPhotosBtn.disabled = state;\n}\n\nfunction showAlert(msg) {\n    iziToast.show({\n        position: 'center',\n        iconUrl: alertImg,\n        messageColor: '#FAFAFB',\n        messageSize: '16px',\n        backgroundColor: '#EF4040',\n        close: false,\n        closeOnClick: true,\n        message: msg\n    });\n}\n"],"names":["alertImg","url","searchParams","form","searchTerm","searchPhotosBtn","getMoreBtn","loader","gallery","simpleGallery","SimpleLightbox","event","showAlert","showLoader","fetchPhotos","response","axios","renderPhotos","error","photos","markup","photo","rect","state","msg","iziToast"],"mappings":"owBAAA,MAAeA,EAAA,2CCOTC,EAAM,2BACNC,EAAe,CACjB,IAAK,qCACL,EAAG,GACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAM,CACV,EAEMC,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAa,SAAS,cAAc,aAAa,EACjDC,EAAkB,SAAS,cAAc,aAAa,EACtDC,EAAa,SAAS,cAAc,eAAe,EACnDC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAU,SAAS,cAAc,UAAU,EAE3CC,EAAgB,IAAIC,EAAe,aAAc,CACnD,eAAgB,GAChB,aAAc,MACd,aAAc,GAClB,CAAC,EAEDP,EAAK,iBAAiB,SAAWQ,GAAU,CAEvC,GADAA,EAAM,eAAc,EAChBP,EAAW,MAAM,KAAI,EAAG,OAAS,EAAG,CACpCQ,EAAU,4BAA4B,EACtC,MACH,CACDJ,EAAQ,UAAY,GACpBK,EAAW,EAAI,EACfX,EAAa,EAAIE,EAAW,MAAM,KAAI,EACtCF,EAAa,KAAO,EACpBY,GACJ,CAAC,EAEDR,EAAW,iBAAiB,QAAS,IAAM,CACvCJ,EAAa,MAAQ,EACrBW,EAAW,EAAI,EACfC,GACJ,CAAC,EAED,eAAeA,GAAc,CAC3B,GAAI,CACF,MAAMC,EAAW,MAAMC,EAAM,IAAIf,EAAK,CAAE,OAAQC,CAAY,CAAE,EAC5De,EAAa,MAAMF,EAAS,IAAI,CACnC,OAAQG,EAAP,CACEN,EAAUM,EAAM,OAAO,EACvBL,EAAW,EAAK,CACnB,CACH,CAEA,SAASI,EAAaE,EAAQ,CAC1B,GAAIA,EAAO,QAAU,EAAG,CACpBP,EAAU,0EAA0E,EACpFC,EAAW,EAAK,EAChB,MACH,CACD,MAAMO,EAASD,EAAO,KACjB,IAAKE,GACK,iCAAiCA,EAAM,6EAA6EA,EAAM,sBAAsBA,EAAM,gBAAgBA,EAAM;AAAA;AAAA,8GAEjFA,EAAM;AAAA,8GACNA,EAAM;AAAA,iHACHA,EAAM;AAAA,kHACLA,EAAM;AAAA;AAAA,iBAG/G,EACA,KAAK,EAAE,EAYZ,GAXAR,EAAW,EAAK,EAChBL,EAAQ,mBAAmB,YAAaY,CAAM,EAE1ClB,EAAa,OAAS,GAAKiB,EAAO,UAAY,IAC9Cb,EAAW,MAAM,QAAU,SAE3B,KAAK,KAAKa,EAAO,UAAYjB,EAAa,QAAQ,IAAMA,EAAa,OACrEI,EAAW,MAAM,QAAU,OAC3BM,EAAU,4DAA4D,GAE1EH,EAAc,QAAO,EACjBP,EAAa,KAAO,EAAG,CACvB,MAAMoB,EAAO,SAAS,cAAc,eAAe,EAAE,sBAAqB,EAC1E,OAAO,SAAS,CAAE,IAAKA,EAAK,OAAS,EAAG,KAAM,EAAG,SAAU,QAAU,CAAA,CACxE,CACL,CAEA,SAAST,EAAWU,EAAQ,GAAM,CAC9BhB,EAAO,MAAM,QAAWgB,EAAiB,eAAT,OAChClB,EAAgB,SAAWkB,CAC/B,CAEA,SAASX,EAAUY,EAAK,CACpBC,EAAS,KAAK,CACV,SAAU,SACV,QAASzB,EACT,aAAc,UACd,YAAa,OACb,gBAAiB,UACjB,MAAO,GACP,aAAc,GACd,QAASwB,CACjB,CAAK,CACL"}